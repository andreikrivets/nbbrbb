{"version":3,"sources":["components/chart.jsx","components/Page.jsx","components/dateCorrect.js","components/getCurrentRates.js","components/getCurrencyDynamics.js","components/App.jsx","index.jsx"],"names":["withHighcharts","stat","abbr","mobile","useMediaQuery","className","HighchartsChart","Chart","width","height","Tooltip","valueSuffix","XAxis","YAxis","name","data","Highcharts","Page","props","isLoading","setDate","Cur_OfficialRate","CircularProgress","style","marginLeft","marginTop","multipler","Cur_Scale","defaultValue","Date","slice","display","flexDirection","alignItems","Typography","variant","color","Cur_Abbreviation","toFixed","noValidate","TextField","type","onChange","currentDate","date","now","y","getFullYear","m","getMonth","length","d","getDate","getStartDate","dat","array","split","join","getCurrentRates","id","a","current","url","fetch","resp","json","getCurrencyDynamics","from","req","map","el","App","useState","value","setValue","setStat","setData","setIsLoading","ids","fetchData","then","dyn","useEffect","initCurrency","localStorage","getItem","Container","maxWidth","Paper","Tabs","event","newValue","setItem","indicatorColor","textColor","centered","Tab","label","e","target","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.3f1d12f8.chunk.js","sourcesContent":["import React from \"react\";\r\nimport Highcharts from \"highcharts\";\r\nimport {\r\n  HighchartsChart,\r\n  Chart,\r\n  withHighcharts,\r\n  XAxis,\r\n  YAxis,\r\n  Tooltip,\r\n  LineSeries,\r\n} from \"react-jsx-highcharts\";\r\nimport { useMediaQuery } from \"@material-ui/core\";\r\n\r\nconst ChartSection = ({ stat, abbr }) => {\r\n  const mobile = useMediaQuery(\"(max-width:600px)\");\r\n  return (\r\n    <div className=\"chart-wrapper\">\r\n      <HighchartsChart>\r\n        <Chart width={mobile ? 350 : 600} height={mobile ? 300 : 400} />\r\n        <Tooltip valueSuffix=\"BYN\" />\r\n\r\n        <XAxis />\r\n\r\n        <YAxis>\r\n          <LineSeries name={abbr} data={stat} />\r\n        </YAxis>\r\n      </HighchartsChart>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withHighcharts(ChartSection, Highcharts);\r\n","import React from \"react\";\r\nimport { Typography, CircularProgress, TextField } from \"@material-ui/core\";\r\n\r\nimport ChartSection from \"./chart\";\r\n\r\nconst Page = (props) => {\r\n  const { data, stat, isLoading, setDate } = props;\r\n  if (!data.Cur_OfficialRate || isLoading)\r\n    return <CircularProgress style={{ marginLeft: \"50%\", marginTop: \"5%\" }} />;\r\n  const multipler = data.Cur_Scale;\r\n  const defaultValue = data.Date.slice(0, 10);\r\n  return (\r\n    <section\r\n      style={{\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n        marginTop: \"5%\",\r\n      }}\r\n    >\r\n      <Typography variant=\"h4\" color=\"primary\">\r\n        {`${multipler} ${\r\n          data.Cur_Abbreviation\r\n        } = ${data.Cur_OfficialRate.toFixed(2)} BYN`}\r\n      </Typography>\r\n      <form noValidate>\r\n        <TextField type=\"date\" defaultValue={defaultValue} onChange={setDate} />\r\n      </form>\r\n      <ChartSection stat={stat} abbr={data.Cur_Abbreviation} />\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Page;\r\n","const currentDate = () => {\r\n  const date = new Date(Date.now());\r\n  const y = date.getFullYear();\r\n  const m =\r\n    date.getMonth().length === 2\r\n      ? date.getMonth() + 1\r\n      : `0${date.getMonth() + 1}`;\r\n  const d = date.getDate().length === 2 ? date.getDate() : `0${date.getDate()}`;\r\n  return `${y}-${m}-${d}`;\r\n};\r\n\r\nconst getStartDate = (dat) => {\r\n  const array = dat.split(\"-\");\r\n  array[1] -= 1;\r\n  const from = array.join(\"-\");\r\n  return from;\r\n};\r\n\r\nexport { currentDate, getStartDate };\r\n","import { currentDate } from \"./dateCorrect\";\r\n\r\nconst getCurrentRates = async (id, dat) => {\r\n  const current = currentDate();\r\n  let date;\r\n  if (new Date(dat) > new Date(current)) date = current;\r\n  else date = dat;\r\n  const url = `https://www.nbrb.by/api/exrates/rates/${id}?ondate=${date}`;\r\n  const resp = await fetch(url);\r\n  const data = await resp.json();\r\n  return data;\r\n};\r\n// 145, 292, 298\r\n\r\nexport default getCurrentRates;\r\n","import { currentDate, getStartDate } from \"./dateCorrect\";\r\n\r\nconst getCurrencyDynamics = async (id, dat) => {\r\n  const current = currentDate();\r\n  let date;\r\n  if (new Date(dat) > new Date(current)) date = current;\r\n  else date = dat;\r\n  const from = getStartDate(date);\r\n  const url = `https://www.nbrb.by/API/ExRates/Rates/Dynamics/${id}?startDate=${from}&endDate=${date}`;\r\n  const req = await fetch(url);\r\n  const json = await req.json();\r\n  return json.map((el) => [\r\n    el.Date.slice(0, 10),\r\n    +el.Cur_OfficialRate.toFixed(3),\r\n  ]);\r\n};\r\n\r\nexport default getCurrencyDynamics;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Container, Paper, Tabs, Tab, useMediaQuery } from \"@material-ui/core\";\r\n\r\nimport Page from \"./Page\";\r\nimport getCurrentRates from \"./getCurrentRates\";\r\nimport getCurrencyDynamics from \"./getCurrencyDynamics\";\r\nimport { currentDate } from \"./dateCorrect\";\r\n\r\nconst App = () => {\r\n  const [value, setValue] = useState(0);\r\n  const [stat, setStat] = useState({});\r\n  const [data, setData] = useState({});\r\n  const [date, setDate] = useState(currentDate());\r\n\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const ids = [145, 292, 298];\r\n  const mobile = useMediaQuery(\"(max-width:600px)\");\r\n\r\n  const fetchData = async (id, dat) => {\r\n    setIsLoading(true);\r\n    await getCurrentRates(id, dat).then((req) => setData(req));\r\n    await getCurrencyDynamics(id, dat).then((dyn) => setStat(dyn));\r\n    setIsLoading(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const initCurrency = localStorage.getItem(\"id\") || 145;\r\n    setValue(+localStorage.getItem(\"value\") || 0);\r\n    fetchData(initCurrency, currentDate());\r\n  }, []);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    localStorage.setItem(\"id\", ids[newValue]);\r\n    localStorage.setItem(\"value\", newValue);\r\n    setValue(newValue);\r\n    fetchData(ids[newValue], date);\r\n  };\r\n\r\n  const handleDateChange = (e) => {\r\n    if (e.target.value) {\r\n      setDate(e.target.value);\r\n      fetchData(\r\n        localStorage.getItem(\"id\"),\r\n        e.target.value ? e.target.value : currentDate()\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container maxWidth={mobile ? \"sm\" : \"md\"}>\r\n      <Paper>\r\n        <Tabs\r\n          value={value}\r\n          onChange={handleChange}\r\n          indicatorColor=\"primary\"\r\n          textColor=\"primary\"\r\n          centered\r\n        >\r\n          <Tab label=\"USD\" />\r\n          <Tab label=\"EUR\" />\r\n          <Tab label=\"RUB\" />\r\n        </Tabs>\r\n        <Page\r\n          data={data}\r\n          stat={stat}\r\n          isLoading={isLoading}\r\n          setDate={handleDateChange}\r\n        />\r\n      </Paper>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nimport App from \"./components/App\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}